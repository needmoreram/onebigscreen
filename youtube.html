<!DOCTYPE html>
<html>
<head>
<title>One Big Screen &mdash; watch videos with your online friends</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="imgs/favicon.png">
<!-- Bootstrap -->
<link href="bootstrap-3.0.0/dist/css/bootstrap.min.css" rel="stylesheet" media="screen">
<!-- Custom style -->
<link href="//getbootstrap.com/examples/offcanvas/offcanvas.css" rel=stylesheet" media="screen">

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
      <script src="bootstrap-3.0.0/assets/js/html5shiv.js"></script>
      <script src="bootstrap-3.0.0/assets/js/respond.min.js"></script>
    <![endif]-->
<link href="css/style.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <p class="navbar-text pull-right">
        <span id="greeting"></span>
        <a href="#" id="btnLogin">Login</a>
    </p>
</nav>
<div class="container">
    <h3 class="text-muted text-center"><a href="/"><img src="imgs/obsLogo5HD-t.png"/></a></h3>
</div>

<div class="container">
    <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-12 col-sm-9">
            <div id="player"></div>
            <hr/>
            <div class="well">
                <p><strong>Welcome! To invite people to watch this video with you just send them the link to this page.</strong><br/>
You can change your name by typing: <code>/alias NAME</code>.</p>
                <div id="chat">
                    <ul id="messages" class="list-unstyled">
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="input-group">
                        <input id="userMessage" type="text" class="form-control">
                        <span class="input-group-btn">
                            <button id="sendMessage" class="btn btn-default" type="button">Send</button>
                        </span>
                    </div><!-- /input-group -->
                </div><!-- /.col-lg-12 -->
            </div><!-- /.row -->
        </div><!--/span-->

        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
            <div class="sidebar-nav">
                <button id="sendfacebookinvite" type="submit" class="btn">Invite Facebook Friends</button>
                <dl id="users">
                    <dt>People watching</dt>
                </dl>
            </div><!--/.well -->
        </div><!--/span-->
    </div><!--/row-->

    <hr>

    <footer>
        <p>&copy; One Big Screen 2013 <span class="pull-right"><a href="mailto:onebigscreen.team@gmail.com">Contact us</a></span></p>
    </footer>
</div><!--/.container-->

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="//code.jquery.com/jquery.js"></script>
<script src="js/plugins/jquery.cookie.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="bootstrap-3.0.0/dist/js/bootstrap.min.js"></script>
<script src='https://cdn.firebase.com/v0/firebase.js'></script>
<script type='text/javascript'
        src='https://cdn.firebase.com/v0/firebase-simple-login.js'>
</script>
<script src="js/plugins/jquery.cookie.js"></script>
<script src="js/loginscript.js"></script>
<script>
        var authRef, auth;
        var curruser = null;
        $(document).ready(function () {
            console.log(window.location);
            $.getScript('//connect.facebook.net/en_UK/all.js', function () {
                FB.init({
                    appId: '595216043874435',
                    channelUrl: '//yourapp.com/channel.html'
                });
                $("#sendfacebookinvite").click(function () {
                    FB.ui({
                        method: 'send',
                        link: window.location.hostname === "localhost" ? "http://onebigscreen.com/youtube.html?id=-J5G9DnADhOtJBwlIFLb" : window.location.href
                    });
                    return false;
                });
            });
            authRef = new Firebase("https://onebigscreen-fblogin.firebaseio.com");
            auth = new FirebaseSimpleLogin(authRef, processLogin);
            $("#btnLogin").click(function () {
                if ($(this).text() === 'Login') {
                    loginUser();
                    $(this).text('Logout');
                }
                else {
                    logoutUser();
                    $(this).text('Login');
                }
                return false;
            });
            getCurrentUser({
                onComplete: function (data) {
                    if (data) {
                        console.log(data);
                        curruser = data;
                        displayUser();
                        $("#btnLogin").text('Logout');
                    }
                },
                onError: function (error) {
                    if (error) {
                        console.log(error);
                    }
                    $("#btnLogin").text('Login');
                }
            });
        });
</script>
<script src="js/firebase.js"></script>
<script src="js/players/youtube.js"></script>
<script src="js/presence.js"></script>
<script>
// Include the UserVoice JavaScript SDK (only needed once on a page)
UserVoice=window.UserVoice||[];(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/XHGJQ6GfJhBSpRlT65I9Lw.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})();

//
// UserVoice Javascript SDK developer documentation:
// https://www.uservoice.com/o/javascript-sdk
//

// Set colors
UserVoice.push(['set', {
  accent_color: '#448dd6',
  trigger_color: 'white',
  trigger_background_color: 'rgba(46, 49, 51, 0.6)'
}]);

// Identify the user and pass traits
// To enable, replace sample data with actual user traits and uncomment the line
UserVoice.push(['identify', {
  //email:      'john.doe@example.com', // User’s email address
  //name:       'John Doe', // User’s real name
  //created_at: 1364406966, // Unix timestamp for the date the user signed up
  //id:         123, // Optional: Unique id of the user (if set, this should not change)
  //type:       'Owner', // Optional: segment your users by type
  //account: {
  //  id:           123, // Optional: associate multiple users with a single account
  //  name:         'Acme, Co.', // Account name
  //  created_at:   1364406966, // Unix timestamp for the date the account was created
  //  monthly_rate: 9.99, // Decimal; monthly rate of the account
  //  ltv:          1495.00, // Decimal; lifetime value of the account
  //  plan:         'Enhanced' // Plan name for the account
  //}
}]);

// Add default trigger to the bottom-right corner of the window:
UserVoice.push(['addTrigger', { mode: 'contact', trigger_position: 'top-right' }]);

// Or, use your own custom trigger:
//UserVoice.push(['addTrigger', '#id', { mode: 'contact' }]);

// Autoprompt for Satisfaction and SmartVote (only displayed under certain conditions)
UserVoice.push(['autoprompt', {}]);
</script>
</body>
</html>
